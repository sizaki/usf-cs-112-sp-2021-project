package DataAnalytics;

import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class KNNPredictor extends Predictor {
	private int k;
	private int bluenumber;
	private int orangenumber;

	public KNNPredictor(int numk) {
		k = numk;
		bluenumber = 0;
		orangenumber = 0;
	}

public double getDistance(DataPoint data1,DataPoint data2) {
	return Math.sqrt(Math.pow(data2.getf1()-data1.getf1(), 2)+(Math.pow(data2.getf2()-data1.getf2(), 2));
}

	@Override
	public ArrayList<DataPoint> readData(String filename) {
		ArrayList<DataPoint> results=new ArrayList<DataPoint>();
		try (Scanner scanner = new Scanner(new File(filename));) {
			while (scanner.hasNextLine()) {
				List<String> records = getRecordFromLine(scanner.nextLine());
				Integer survived = Integer.parseInt(records.get(0));
				Double age = Double.parseDouble(records.get(4));
				Double fare = Double.parseDouble(records.get(5));
				String label = records.get(1);
				Boolean test = false;
				if(Math.random()<0.1) {
					test=true;
				}
				if(test==false) {
					if(survived==1) {
						orangenumber++;					
					}
					else {
						bluenumber++;
					}
				}
				DataPoint data = new DataPoint(age,fare,label,test);
				results.add(data);
		}
			
		// TODO: Select the columns from the records and create a DataPoint object// TODO: Store the DataPoint object in a collection}}
		} catch (FileNotFoundException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		// TODO Auto-generated method stub
		return results;
	}

	private List<String> getRecordFromLine(String line) {
		List<String> values = new ArrayList<String>();
		try (Scanner rowScanner = new Scanner(line)) {
			rowScanner.useDelimiter(",");
			while (rowScanner.hasNext()) {
				values.add(rowScanner.next());
			}
		}
		return values;
	}

	@Override
	public String test(DataPoint data) {
		Double[][] array=new Double[bluenumber+orangenumber][2]
		if(data.getisTest()==true) {
			
		}
		else {
			return null;
		}
		// TODO Auto-generated method stub
	}

	@Override
	public Double getAccuracy(ArrayList<DataPoint> data) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public Double getPrecision(ArrayList<DataPoint> data) {
		// TODO Auto-generated method stub
		return null;
	}

}
